{"version":3,"sources":["context.js","services/todos.js","services/columns.js","services/mode.js","reducer.js","components/ButtonWrapper.js","components/TodoHeader.js","services/queue.js","services/sort.js","components/TodoList.js","components/TodoFormInner.js","services/query.js","components/TodoForm.js","index.js","usePersist.js"],"names":["Store","React","createContext","todos","uniqueId","title","content","columns","mode","filtered","isEditing","currentTodo","processing","previousUniqueIds","index","undefined","reducer","state","action","type","payload","splice","editTodo","formatTodos","map","t","parseFloat","filter","toString","ButtonWrapper","useContext","dispatch","isCreateMode","isSearchMode","className","onClick","TodoHeader","props","children","Queue","promise","Promise","resolve","reject","queue","push","dequeue","this","workingOnPromise","item","shift","then","value","catch","err","swap","items","leftIndex","rightIndex","temp","partitionAscending","left","right","pivot","Math","floor","i","j","sign","localeCompare","numeric","partitionDescending","quickSort","ascending","length","TodoList","useState","flag","setFlag","setPreviousUniqueIds","setAscending","useEffect","count","delay","ms","a","r","setTimeout","res","sortBy","column","num","e","sorted","header","col","key","style","textAlign","cursor","scope","todo","addDeletedToState","concat","findIndex","enqueue","onDelete","disabled","marginRight","onEdit","TodoFormInner","values","onKeyUp","onChange","btnText","onSubmit","width","autoFocus","placeholder","compareObjects","o1","o2","k","itemExists","haystack","needle","search","query","q","trim","toLowerCase","newTodos","results","indexOf","TodoForm","getUniqueId","setTodo","setQuery","setEditTodo","Date","now","slice","handleTodoEdit","handleTodoAdd","handleSubmitForm","event","keyCode","target","App","globalStore","context","persistedContext","localStorage","getItem","JSON","parse","usePersistedContext","setItem","stringify","usePersistedReducer","useReducer","Provider","pendingPromise","rootElement","document","getElementById","ReactDOM","render"],"mappings":"8OAwBeA,EAjBDC,IAAMC,cAAc,CAEjCC,MCToB,CACpB,CAAEC,SAAU,SAAUC,MAAO,YAAaC,QAAS,KACnD,CAAEF,SAAU,SAAUC,MAAO,YAAaC,QAAS,KACnD,CAAEF,SAAU,SAAUC,MAAO,YAAaC,QAAS,KACnD,CAAEF,SAAU,SAAUC,MAAO,YAAaC,QAAS,KACnD,CAAEF,SAAU,SAAUC,MAAO,YAAaC,QAAS,KACnD,CAAEF,SAAU,SAAUC,MAAO,YAAaC,QAAS,KACnD,CAAEF,SAAU,SAAUC,MAAO,aAAcC,QAAS,MDGpDC,QEVsB,CAAE,KAAM,QAAS,UAAW,WFWlDC,KGXwB,OHYxBC,SAAU,GACVC,WAAW,EACXC,YAAa,CACZL,QAAS,GACTD,MAAO,GACPD,SAAU,GAEXQ,YAAY,EACZC,kBAAmB,GACnBC,WAAOC,I,cInBO,SAASC,EAAQC,EAAOC,GACtC,OAAQA,EAAOC,MACd,IAAK,qBACJ,OAAO,2BACHF,GADJ,IAECJ,kBAAkB,YAAMK,EAAOE,WAEjC,IAAK,kBACJ,OAAO,2BACHH,GADJ,IAECL,WAAYM,EAAOE,UAErB,IAAK,OACJ,OAAO,2BACHH,GADJ,IAECd,MAAOe,EAAOE,QACdX,SAAUS,EAAOE,UAEnB,IAAK,SACJ,OAAO,2BACHH,GADJ,IAECR,SAAUS,EAAOE,QAAQX,WAE3B,IAAK,cAGJ,IAAMA,EAAQ,YAAQQ,EAAMR,UACtBN,EAAK,YAAQc,EAAMd,OACzBM,EAASY,OAAOH,EAAOE,QAAQN,MAAO,EAAGI,EAAOE,QAAQE,UACxDnB,EAAMkB,OAAOH,EAAOE,QAAQN,MAAO,EAAGI,EAAOE,QAAQE,UACrD,IAAMC,EAAcpB,EAAMqB,KAAI,SAAAC,GAAC,MAAK,CACnCrB,SAAUsB,WAAWD,EAAErB,UACvBC,MAAOoB,EAAEpB,MACTC,QAASmB,EAAEnB,YAEZ,OAAO,2BACHW,GADJ,IAECd,MAAM,YAAMoB,GACZd,SAAS,YAAMA,KAEjB,IAAK,cACJ,MD3CsB,SC2ClBS,EAAOE,UD1Ca,WC6CpBF,EAAOE,SD5Ca,WC+CpBF,EAAOE,SALH,2BAAKH,GAAZ,IAAmBT,KAAMU,EAAOE,UDzCX,SCiDlBF,EAAOE,QAAQZ,KAEX,2BACHS,GADJ,IAECT,KAAMU,EAAOE,QAAQZ,KACrBG,YAAaO,EAAOE,QAAQT,YAC5BG,MAAOI,EAAOE,QAAQN,QAGjBG,EACR,IAAK,WACJ,OAAO,2BACHA,GADJ,IAECd,MAAM,GAAD,mBAAOc,EAAMd,OAAb,CAAoBe,EAAOE,UAChCX,SAAS,GAAD,mBAAOQ,EAAMR,UAAb,CAAuBS,EAAOE,YAExC,IAAK,WAEJ,OAAO,2BACHH,GADJ,IAECd,MAAOc,EAAMd,MAAMwB,QAAO,SAAAF,GAAC,OAAIA,EAAErB,SAASwB,aAAeV,EAAOE,QAAQQ,cACxEnB,SAAUQ,EAAMR,SAASkB,QAAO,SAAAF,GAAC,OAAIA,EAAErB,SAASwB,aAAeV,EAAOE,QAAQQ,gBAEhF,QACC,OAAOX,G,iCCxEK,SAASY,IAAiB,IAAD,EACXC,qBAAW9B,GAA/BiB,EAD+B,EAC/BA,MAAOc,EADwB,EACxBA,SACTC,EAAe,iBFJK,WEICf,EAAMT,MAC3ByB,EAAe,iBFNK,WEMChB,EAAMT,MAEjC,OACC,yBAAK0B,UAAU,WACd,4BACC7B,MAAM,eACN6B,UAAW,eAAiBF,IAAiB,WAAa,IAC1DG,QAAS,kBAAMJ,EAAS,CAAEZ,KAAM,cAAeC,QAASY,IFdnC,OAEE,cEcxB,4BACC3B,MAAM,SACN6B,UAAW,kBAAoBD,IAAiB,WAAa,IAC7DE,QAAS,kBAAMJ,EAAS,CAAEZ,KAAM,cAAeC,QAASa,IFnBnC,OACE,eGEpB,IAAMG,EAAa,SAAAC,GAAK,OAC9B,yBAAKH,UAAU,OACd,yBAAKA,UAAU,6BACd,yCACA,kBAACL,EAAD,OAED,yBAAKK,UAAU,YAAYG,EAAMC,Y,gBCTdC,E,qGAILC,GAAU,IAAD,OACvB,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC5B,EAAKC,MAAMC,KAAK,CACfL,UACAE,UACAC,WAED,EAAKG,e,gCAIW,IAAD,OAChB,GAAIC,KAAKC,iBACR,OAAO,EAER,IAAMC,EAAOF,KAAKH,MAAMM,QACxB,IAAKD,EACJ,OAAO,EAER,IACCF,KAAKC,kBAAmB,EACxBC,EACET,UACAW,MAAK,SAAAC,GACL,EAAKJ,kBAAmB,EACxBC,EAAKP,QAAQU,GACb,EAAKN,aAELO,OAAM,SAAAC,GACN,EAAKN,kBAAmB,EACxBC,EAAKN,OAAOW,GACZ,EAAKR,aAEN,MAAOQ,GACRP,KAAKC,kBAAmB,EACxBC,EAAKN,OAAOW,GACZP,KAAKD,UAEN,OAAO,M,KC1CT,SAASS,EAAKC,EAAOC,EAAWC,GAC/B,IAAIC,EAAOH,EAAMC,GACjBD,EAAMC,GAAaD,EAAME,GACzBF,EAAME,GAAcC,EAErB,SAASC,EAAmBJ,EAAOK,EAAMC,EAAO3C,GAK/C,IAJA,IAAI4C,EAAQP,EAAMQ,KAAKC,OAAOH,EAAQD,GAAQ,IAAI1C,GAE9C+C,EAAIL,EACJM,EAAIL,EACDI,GAAKC,GAAG,CACd,GAAa,aAAThD,EAAqB,CACxB,KAAOqC,EAAMU,GAAG/C,GAAQ4C,GACvBG,IAED,KAAOV,EAAMW,GAAGhD,GAAQ4C,GACvBI,SAEK,GAAa,UAAThD,EAAkB,CAC5B,KAAO6C,KAAKI,KAAKZ,EAAMU,GAAG/C,GAAMkD,cAAcN,EAAO,KAAM,CAAEO,SAAS,KAAW,GAChFJ,IAED,KAAOF,KAAKI,KAAKZ,EAAMW,GAAGhD,GAAMkD,cAAcN,EAAO,KAAM,CAAEO,SAAS,KAAW,GAChFH,IAGED,GAAKC,IACRZ,EAAKC,EAAOU,EAAGC,GACfD,IACAC,KAGF,OAAOD,EAGR,SAASK,EAAoBf,EAAOK,EAAMC,EAAO3C,GAKhD,IAJA,IAAI4C,EAAQP,EAAMQ,KAAKC,OAAOH,EAAQD,GAAQ,IAAI1C,GAE9C+C,EAAIL,EACJM,EAAIL,EACDI,GAAKC,GAAG,CACd,GAAa,aAAThD,EAAqB,CACxB,KAAOqC,EAAMU,GAAG/C,GAAQ4C,GACvBG,IAED,KAAOV,EAAMW,GAAGhD,GAAQ4C,GACvBI,SAEK,GAAa,UAAThD,EAAkB,CAC5B,KAAO6C,KAAKI,KAAKZ,EAAMU,GAAG/C,GAAMkD,cAAcN,EAAO,KAAM,CAAEO,SAAS,KAAW,GAChFJ,IAED,KAAOF,KAAKI,KAAKZ,EAAMW,GAAGhD,GAAMkD,cAAcN,EAAO,KAAM,CAAEO,SAAS,KAAW,GAChFH,IAGED,GAAKC,IACRZ,EAAKC,EAAOU,EAAGC,GACfD,IACAC,KAGF,OAAOD,EAGD,SAASM,EAAUhB,EAAOK,EAAMC,GAA6C,IAC/EhD,EADyCK,EAAqC,uDAA9B,WAAYsD,IAAkB,yDAiBlF,OAfIjB,EAAMkB,OAAS,IACdD,EACH3D,EAAQ8C,EAAmBJ,EAAOK,EAAMC,EAAO3C,GACpCsD,IACX3D,EAAQyD,EAAoBf,EAAOK,EAAMC,EAAO3C,IAE7C0C,EAAO/C,EAAQ,GAElB0D,EAAUhB,EAAOK,EAAM/C,EAAQ,EAAGK,EAAMsD,GAErC3D,EAAQgD,GAEXU,EAAUhB,EAAO1C,EAAOgD,EAAO3C,EAAMsD,IAGhCjB,ECzEO,SAASmB,IAAY,IAAD,EACN7C,qBAAW9B,GAA/BiB,EAD0B,EAC1BA,MAAOc,EADmB,EACnBA,SADmB,EAER6C,oBAAS,GAFD,mBAE1BC,EAF0B,KAEpBC,EAFoB,OAGkBF,mBAAS,IAH3B,mBAG1B/D,EAH0B,KAGPkE,EAHO,OAIEH,oBAAS,GAJX,mBAI1BH,EAJ0B,KAIfO,EAJe,KAUlCC,qBACC,WACClD,EAAS,CAAEZ,KAAM,kBAAmBC,QAASyD,IAC7C9C,EAAS,CAAEZ,KAAM,qBAAsBC,QAASP,MAEjD,CAAEgE,EAAMhE,EAAmBkB,IAG5B,IAZkBmD,EAYZC,EAAK,uCAAG,WAAOjE,EAAQkE,GAAf,eAAAC,EAAA,6DACbP,GAAQ,GADK,SAEK,IAAIrC,SAAQ,SAAA6C,GAAC,OAC9BC,YAAW,WACVD,EAAEpE,KACAkE,MALS,OAEPI,EAFO,OAObV,GAAQ,GACRU,IARa,2CAAH,wDAsCLC,EAAS,SAAAC,GACd,GAAe,OAAXA,EAAiB,CACpBV,GAAcP,GACd,IAAMkB,EAAM1E,EAAMR,SAASe,KAAI,SAAAoE,GAAC,MAAK,CACpCxF,SAAUsB,WAAWkE,EAAExF,UACvBC,MAAOuF,EAAEvF,MACTC,QAASsF,EAAEtF,YAGNuF,EAASrB,EAAUmB,EAAK,EAAGA,EAAIjB,OAAS,EAAG,WAAYD,GAC7D1C,EAAS,CAAEZ,KAAM,OAAQC,QAASyE,SAC5B,GAAe,UAAXH,EAAoB,CAC9BV,GAAcP,GACd,IAAMhE,EAAQ,YAAQQ,EAAMR,UACtBoF,EAASrB,EAAU/D,EAAU,EAAGA,EAASiE,OAAS,EAAG,QAASD,GACpE1C,EAAS,CAAEZ,KAAM,OAAQC,QAASyE,MAIhCC,EACH,kBAAC,EAAD,MACG7E,EAAML,YAAc,0BAAMsB,UAAU,gBAvEtBgD,EAuE+CjE,EAAMR,SAASiE,QAvE5C,EAAR,oBAAyBQ,EAAzB,8BAAsDA,EAAtD,WAwEzBjE,EAAML,YAAc,0BAAMsB,UAAU,eAAhB,gBAGvB,OACC,yBAAKA,UAAU,OACd,yBAAKA,UAAU,aACd,yBAAKA,UAAU,OACd,yBAAKA,UAAU,aACd,6BACC4D,IAGF7E,EAAMR,SAASiE,OAAS,GACxB,yBAAKxC,UAAU,OACd,yBAAKA,UAAU,aACd,2BAAOA,UAAU,SAChB,2BAAOA,UAAU,cAChB,4BACEjB,EAAMV,QAAQiB,KAAI,SAACuE,EAAKjF,GAAN,OAClB,wBACCkF,IAAKlF,EACLmF,MACS,YAARF,EACC,CAAEG,UAAW,SACF,YAARH,GAA6B,YAARA,EACxB,CAAEI,OAAQ,WACP,KAELC,MAAM,MACNjE,QACS,OAAR4D,GAEY,UAARA,EADH,kBAAMN,EAAOM,IAGV,MAGJA,QAKL,+BACE9E,EAAMR,SAASe,KAAI,SAAC6E,EAAMvF,GAAP,OACnB,wBAAIkF,IAAKK,EAAKjG,UACb,wBAAIgG,MAAM,OAAOC,EAAKjG,UACtB,4BAAKiG,EAAKhG,OACV,4BAAKgG,EAAK/F,SACV,4BACC,4BACC4B,UAAU,oCACVC,QAAS,kBAjGJ,SAAA/B,GAChB,IAAMkG,EAAoBzF,EAAkB0F,OAAOnG,IAEpC,IADDa,EAAMJ,kBAAkB2F,WAAU,SAAA/E,GAAC,OAAIA,IAAMrB,OAE1D2E,EAAqB,YAAKuB,IAC1B/D,EAAMkE,SAAQ,kBACbtB,GAAM,WACLpD,EAAS,CACRZ,KAAM,WACNC,QAAShB,MAER,SAsFqBsG,CAASL,EAAKjG,WAC7BuG,SNxIY,SMcC1F,EAAMT,MAuHpB,UAOA,4BACCyF,MAAO,CAAEW,YAAa,QACtB1E,UAAU,qCACVyE,SAAU1F,EAAML,WAChBuB,QAAS,kBA1FN,SAACkE,EAAMvF,GACrBiB,EAAS,CACRZ,KAAM,cACNC,QAAS,CAAEZ,KNzDW,OMyDMG,YAAa0F,EAAMvF,WAuFtB+F,CAAOR,EAAMvF,KAJ7B,mBC3IG,SAASgG,EAAczE,GAAQ,IACrC0E,EAA6D1E,EAA7D0E,OAAQC,EAAqD3E,EAArD2E,QAASC,EAA4C5E,EAA5C4E,SAAUC,EAAkC7E,EAAlC6E,QAAStG,EAAyByB,EAAzBzB,WAAYuG,EAAa9E,EAAb8E,SAChDpF,EAAaD,qBAAW9B,GAAxB+B,SAER,OACC,yBAAKG,UAAU,eACd,2BACCA,UAAU,eACV+D,MAAO,CAAEmB,MAAO,QAChBhE,MAAO2D,EAAO1G,MACdgH,WAAW,EACXC,YAAY,6BACZN,QAAS,SAAApB,GAAC,OAAIoB,EAAQpB,EAAG,QACzBqB,SAAU,SAAArB,GAAC,OAAIqB,EAASrB,EAAG,YAE5B,8BACC1D,UAAU,eACV+D,MAAO,CAAEmB,MAAO,QAChBhE,MAAO2D,EAAOzG,QACd+G,WAAW,EACXL,QAAS,SAAApB,GAAC,OAAIoB,EAAQpB,EAAG,QACzB0B,YAAY,oBACZL,SAAU,SAAArB,GAAC,OAAIqB,EAASrB,EAAG,cAE5B,yBAAK1D,UAAU,qBAAqB+D,MAAO,CAAEmB,MAAO,SACnD,4BAAQT,SAAU/F,EAAYsB,UAAU,kBAAkB+D,MAAO,CAAEmB,MAAO,QAAUjF,QAASgF,GAC3FD,GAEW,SAAZA,GACA,4BACChF,UAAU,iBACV+D,MAAO,CAAEmB,MAAO,QAChBjF,QAAS,kBAAMJ,EAAS,CAAEZ,KAAM,cAAeC,QPpC5B,WOiCpB,YCjCL,SAASmG,EAAeC,EAAIC,GAC3B,IAAIC,EAAI,GACR,IAAKA,KAAKF,EAAI,GAAIA,EAAGE,KAAOD,EAAGC,GAAI,OAAO,EAC1C,IAAKA,KAAKD,EAAI,GAAID,EAAGE,KAAOD,EAAGC,GAAI,OAAO,EAC1C,OAAO,EAGR,SAASC,EAAWC,EAAUC,GAC7B,IAAK,IAAI3D,EAAI,EAAGA,EAAI0D,EAASlD,OAAQR,IAAK,GAAIqD,EAAeK,EAAS1D,GAAI2D,GAAS,OAAO,EAC1F,OAAO,EAGD,SAASC,EAAO3H,EAAO4H,GAU7B,IATA,IAAIC,EAAID,EAAME,OAAOC,cACfC,EAAWhI,EAAMqB,KAAI,SAAAoE,GAC1B,MAAO,CACNxF,SAAUwF,EAAExF,SAASwB,WACrBvB,MAAOuF,EAAEvF,MACTC,QAASsF,EAAEtF,YAGT8H,EAAU,GACLlE,EAAI,EAAGA,EAAIiE,EAASzD,OAAQR,IACpC,IAAK,IAAI8B,KAAOmC,EAASjE,IACa,IAAjCiE,EAASjE,GAAG8B,GAAKqC,QAAQL,KACvBL,EAAWS,EAASD,EAASjE,KAAKkE,EAAQvF,KAAKsF,EAASjE,KAKhE,OAAOkE,ECrBO,SAASE,IAAY,IAAD,EACNxG,qBAAW9B,GAA/BiB,EAD0B,EAC1BA,MAAOc,EADmB,EACnBA,SACPvB,EAAkCS,EAAlCT,KAAMG,EAA4BM,EAA5BN,YAAaC,EAAeK,EAAfL,WAFO,EAGRgE,mBAAS,CAAExE,SAAUmI,IAAelI,MAAO,GAAIC,QAAS,KAHhD,mBAG1B+F,EAH0B,KAGpBmC,EAHoB,OAIN5D,mBAAS,IAJH,mBAI1BmD,EAJ0B,KAInBU,EAJmB,OAKA7D,mBAAS,eAAKjE,IALd,mBAK1BW,EAL0B,KAKhBoH,EALgB,KAgBlC,SAASH,IACR,OAAO7G,WAAWiH,KAAKC,MAAMhH,WAAWiH,MAAM,IAsB/C,SAASC,IACR/G,EAAS,CAAEZ,KAAM,cAAeC,QAAS,CAAEE,WAAUR,MAAOG,EAAMH,SAClEiB,EAAS,CAAEZ,KAAM,cAAeC,QTlDT,SSqDxB,SAAS2H,IAEJ1C,EAAKhG,OACRkF,YAAW,WACVxD,EAAS,CAAEZ,KAAM,WAAYC,QAASiF,IACtCtE,EAAS,CAAEZ,KAAM,qBAAsBC,QAAS,KAChDoH,EAAQ,CAAEpI,SAAUmI,IAAelI,MAAO,GAAIC,QAAS,OACrD,IAIL,SAAS0I,EAAiBC,EAAO9H,GACnB,QAATA,EACmB,KAAlB8H,EAAMC,SAAgBH,IACP,SAAT5H,GACY,KAAlB8H,EAAMC,SAAgBJ,IAI5B,OAxDA7D,qBACC,WACClD,EAAS,CAAEZ,KAAM,SAAUC,QAAS,CAAEX,SAAUqH,EAAO7G,EAAMd,MAAO4H,MAEpEW,EAAY,eAAK/H,MAElB,CAAEoH,EAAOhG,EAAUpB,EAAaM,EAAMd,QAmDtC,yBAAK+B,UAAU,OACd,yBAAKA,UAAU,aACd,6BTzEuB,WS0EtB1B,EACA,kBAACsG,EAAD,CACClG,WAAYA,EACZsG,QAAS,MACTH,OAAQV,EACRW,QAASgC,EACT/B,SAzCL,SAA0BrB,EAAGzE,GACf,UAATA,EACHqH,EAAQ,2BAAKnC,GAAN,IAAYhG,MAAOuF,EAAEuD,OAAO/F,SAChB,YAATjC,GACVqH,EAAQ,2BAAKnC,GAAN,IAAY/F,QAASsF,EAAEuD,OAAO/F,UAsClC+D,SAAU4B,IThFS,SSkFjBvI,EACH,kBAACsG,EAAD,CACClG,WAAYA,EACZsG,QAAS,OACTH,OAAQzF,EACR0F,QAASgC,EACT/B,SA1DL,SAA8BrB,EAAGzE,GACnB,UAATA,EACHuH,EAAY,2BAAKpH,GAAN,IAAgBjB,MAAOuF,EAAEuD,OAAO/F,SACxB,YAATjC,GACVuH,EAAY,2BAAKpH,GAAN,IAAgBhB,QAASsF,EAAEuD,OAAO/F,UAuD1C+D,SAAU2B,IT3FW,WS6FnBtI,EACH,yBAAK0B,UAAU,eACd,2BACCA,UAAU,eACVkB,MAAO2E,EACPV,WAAW,EACXC,YAAY,YACZL,SAxEN,SAAsBrB,GACrB6C,EAAS7C,EAAEuD,OAAO/F,WA0EZ,OC5FR,SAASgG,IAER,IAAMC,ECZA,SAA6BC,GAAyB,IAAhBtD,EAAe,uDAAT,QAC5CuD,EAAmBC,aAAaC,QAAQzD,GAC9C,OAAOuD,EAAmBG,KAAKC,MAAMJ,GAAoBD,EDUrCM,CAAoB9H,qBAAW9B,GAAQ,SAF7C,ECLR,YAAkE,IAAD,mBAAlCiB,EAAkC,KAA3Bc,EAA2B,KAAfiE,EAAe,uDAAT,QAE9D,OADAf,qBAAU,kBAAMuE,aAAaK,QAAQ7D,EAAK0D,KAAKI,UAAU7I,MAAS,CAAE+E,EAAK/E,IAClE,CAAEA,EAAOc,GDQYgI,CAC3BC,qBAAWhJ,EAASqI,GACpB,SAPa,mBAKNpI,EALM,KAKCc,EALD,KAUd,OAEC,kBAAC,EAAMkI,SAAP,CAAgB7G,MAAO,CAAEnC,QAAOc,aAC/B,kBAACuG,EAAD,MACA,kBAAC3D,EAAD,ON1BkBpC,EACbK,MAAQ,GADKL,EAEb2H,gBAAiB,EM6BzB,IAAMC,EAAcC,SAASC,eAAe,QAC5CC,IAASC,OAAO,kBAACnB,EAAD,MAASe,K","file":"static/js/main.0d6771d0.chunk.js","sourcesContent":["import React from 'react';\nimport { MODE_NONE } from './services/mode';\nimport { columns } from './services/columns';\nimport { todos } from './services/todos';\n\n// Store Context is the global context that is managed by reducers.\n\nconst Store = React.createContext({\n\t//todos && filtered are the same, except one is anchor the other is for showing searched results\n\ttodos,\n\tcolumns,\n\tmode: MODE_NONE,\n\tfiltered: [],\n\tisEditing: false,\n\tcurrentTodo: {\n\t\tcontent: '',\n\t\ttitle: '',\n\t\tuniqueId: 0\n\t},\n\tprocessing: false,\n\tpreviousUniqueIds: [],\n\tindex: undefined\n});\n\nexport default Store;\n","export const todos = [\n\t{ uniqueId: 12345678, title: '1atesting', content: 'M' },\n\t{ uniqueId: 22345678, title: 'btesting2', content: 'I' },\n\t{ uniqueId: 32345678, title: 'dtesting3', content: 'K' },\n\t{ uniqueId: 42345678, title: 'ftesting4', content: 'E' },\n\t{ uniqueId: 52345678, title: 'etesting5', content: 'K' },\n\t{ uniqueId: 62345678, title: 'ctesting6', content: 'I' },\n\t{ uniqueId: 72345678, title: 'gtesting10', content: 'M' }\n];\n","export const columns = [ 'ID', 'Title', 'Content', 'Actions' ];\n","export const MODE_NONE = 'none';\nexport const MODE_SEARCH = 'search';\nexport const MODE_CREATE = 'create';\nexport const MODE_EDIT = 'edit';\n","import { MODE_NONE, MODE_SEARCH, MODE_CREATE, MODE_EDIT } from './services/mode';\n\nexport default function reducer(state, action) {\n\tswitch (action.type) {\n\t\tcase 'PREVIOUS_UNIQUE_ID':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpreviousUniqueIds: [ ...action.payload ]\n\t\t\t};\n\t\tcase 'PROCESSING_FLAG':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tprocessing: action.payload\n\t\t\t};\n\t\tcase 'SORT':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttodos: action.payload,\n\t\t\t\tfiltered: action.payload\n\t\t\t};\n\t\tcase 'SEARCH':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfiltered: action.payload.filtered\n\t\t\t};\n\t\tcase 'UPDATE_TODO':\n\t\t\t// state should be immutable so created a new variable for manipulating with splice\n\t\t\t// mapping to ensure uniqueId is float for uploading to server **API integratable**\n\t\t\tconst filtered = [ ...state.filtered ];\n\t\t\tconst todos = [ ...state.todos ];\n\t\t\tfiltered.splice(action.payload.index, 1, action.payload.editTodo);\n\t\t\ttodos.splice(action.payload.index, 1, action.payload.editTodo);\n\t\t\tconst formatTodos = todos.map(t => ({\n\t\t\t\tuniqueId: parseFloat(t.uniqueId),\n\t\t\t\ttitle: t.title,\n\t\t\t\tcontent: t.content\n\t\t\t}));\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttodos: [ ...formatTodos ],\n\t\t\t\tfiltered: [ ...filtered ]\n\t\t\t};\n\t\tcase 'CHANGE_MODE':\n\t\t\tif (action.payload === MODE_NONE) {\n\t\t\t\treturn { ...state, mode: action.payload };\n\t\t\t}\n\t\t\tif (action.payload === MODE_SEARCH) {\n\t\t\t\treturn { ...state, mode: action.payload };\n\t\t\t}\n\t\t\tif (action.payload === MODE_CREATE) {\n\t\t\t\treturn { ...state, mode: action.payload };\n\t\t\t}\n\t\t\tif (action.payload.mode === MODE_EDIT) {\n\t\t\t\t// when mode === edit, set current editing todo to state, and also the index of the todo for updating\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tmode: action.payload.mode,\n\t\t\t\t\tcurrentTodo: action.payload.currentTodo,\n\t\t\t\t\tindex: action.payload.index\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn state;\n\t\tcase 'ADD_TODO':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttodos: [ ...state.todos, action.payload ],\n\t\t\t\tfiltered: [ ...state.filtered, action.payload ]\n\t\t\t};\n\t\tcase 'COMPLETE':\n\t\t\t// filter returns a new function without mutating state, so I directly applied it.\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttodos: state.todos.filter(t => t.uniqueId.toString() !== action.payload.toString()),\n\t\t\t\tfiltered: state.filtered.filter(t => t.uniqueId.toString() !== action.payload.toString())\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import React, { useContext } from 'react';\nimport Store from '../context';\nimport { MODE_NONE, MODE_CREATE, MODE_SEARCH } from '../services/mode';\n\nexport default function ButtonWrapper() {\n\tconst { state, dispatch } = useContext(Store);\n\tconst isCreateMode = () => state.mode === MODE_CREATE;\n\tconst isSearchMode = () => state.mode === MODE_SEARCH;\n\n\treturn (\n\t\t<div className=\"buttons\">\n\t\t\t<button\n\t\t\t\ttitle=\"buttondd New\"\n\t\t\t\tclassName={'button add ' + (isCreateMode() ? 'selected' : '')}\n\t\t\t\tonClick={() => dispatch({ type: 'CHANGE_MODE', payload: isCreateMode() ? MODE_NONE : MODE_CREATE })}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\ttitle=\"Search\"\n\t\t\t\tclassName={'button search ' + (isSearchMode() ? 'selected' : '')}\n\t\t\t\tonClick={() => dispatch({ type: 'CHANGE_MODE', payload: isSearchMode() ? MODE_NONE : MODE_SEARCH })}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport ButtonWrapper from './ButtonWrapper';\n\nexport const TodoHeader = props => (\n\t<div className=\"row\">\n\t\t<div className=\"col-md-8 header-container\">\n\t\t\t<h5>Todo List</h5>\n\t\t\t<ButtonWrapper />\n\t\t</div>\n\t\t<div className=\"col-md-4\">{props.children}</div>\n\t</div>\n);\n","export default class Queue {\n\tstatic queue = [];\n\tstatic pendingPromise = false;\n\n\tstatic enqueue(promise) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.queue.push({\n\t\t\t\tpromise,\n\t\t\t\tresolve,\n\t\t\t\treject\n\t\t\t});\n\t\t\tthis.dequeue();\n\t\t});\n\t}\n\n\tstatic dequeue() {\n\t\tif (this.workingOnPromise) {\n\t\t\treturn false;\n\t\t}\n\t\tconst item = this.queue.shift();\n\t\tif (!item) {\n\t\t\treturn false;\n\t\t}\n\t\ttry {\n\t\t\tthis.workingOnPromise = true;\n\t\t\titem\n\t\t\t\t.promise()\n\t\t\t\t.then(value => {\n\t\t\t\t\tthis.workingOnPromise = false;\n\t\t\t\t\titem.resolve(value);\n\t\t\t\t\tthis.dequeue();\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tthis.workingOnPromise = false;\n\t\t\t\t\titem.reject(err);\n\t\t\t\t\tthis.dequeue();\n\t\t\t\t});\n\t\t} catch (err) {\n\t\t\tthis.workingOnPromise = false;\n\t\t\titem.reject(err);\n\t\t\tthis.dequeue();\n\t\t}\n\t\treturn true;\n\t}\n}\n","function swap(items, leftIndex, rightIndex) {\n\tlet temp = items[leftIndex];\n\titems[leftIndex] = items[rightIndex];\n\titems[rightIndex] = temp;\n}\nfunction partitionAscending(items, left, right, type) {\n\tlet pivot = items[Math.floor((right + left) / 2)][type]; //middle element\n\n\tlet i = left; //left pointer\n\tlet j = right; //right pointer\n\twhile (i <= j) {\n\t\tif (type === 'uniqueId') {\n\t\t\twhile (items[i][type] < pivot) {\n\t\t\t\ti++;\n\t\t\t}\n\t\t\twhile (items[j][type] > pivot) {\n\t\t\t\tj--;\n\t\t\t}\n\t\t} else if (type === 'title') {\n\t\t\twhile (Math.sign(items[i][type].localeCompare(pivot, 'en', { numeric: true })) < 0) {\n\t\t\t\ti++;\n\t\t\t}\n\t\t\twhile (Math.sign(items[j][type].localeCompare(pivot, 'en', { numeric: true })) > 0) {\n\t\t\t\tj--;\n\t\t\t}\n\t\t}\n\t\tif (i <= j) {\n\t\t\tswap(items, i, j); //swapping two elements\n\t\t\ti++;\n\t\t\tj--;\n\t\t}\n\t}\n\treturn i;\n}\n\nfunction partitionDescending(items, left, right, type) {\n\tlet pivot = items[Math.floor((right + left) / 2)][type]; //middle element\n\n\tlet i = left; //left pointer\n\tlet j = right; //right pointer\n\twhile (i <= j) {\n\t\tif (type === 'uniqueId') {\n\t\t\twhile (items[i][type] > pivot) {\n\t\t\t\ti++;\n\t\t\t}\n\t\t\twhile (items[j][type] < pivot) {\n\t\t\t\tj--;\n\t\t\t}\n\t\t} else if (type === 'title') {\n\t\t\twhile (Math.sign(items[i][type].localeCompare(pivot, 'en', { numeric: true })) > 0) {\n\t\t\t\ti++;\n\t\t\t}\n\t\t\twhile (Math.sign(items[j][type].localeCompare(pivot, 'en', { numeric: true })) < 0) {\n\t\t\t\tj--;\n\t\t\t}\n\t\t}\n\t\tif (i <= j) {\n\t\t\tswap(items, i, j); //swapping two elements\n\t\t\ti++;\n\t\t\tj--;\n\t\t}\n\t}\n\treturn i;\n}\n\nexport function quickSort(items, left, right, type = 'uniqueId', ascending = true) {\n\tlet index;\n\tif (items.length > 1) {\n\t\tif (ascending) {\n\t\t\tindex = partitionAscending(items, left, right, type); //index returned from partition\n\t\t} else if (!ascending) {\n\t\t\tindex = partitionDescending(items, left, right, type);\n\t\t}\n\t\tif (left < index - 1) {\n\t\t\t//more elements on the left side of the pivot\n\t\t\tquickSort(items, left, index - 1, type, ascending);\n\t\t}\n\t\tif (index < right) {\n\t\t\t//more elements on the right side of the pivot\n\t\t\tquickSort(items, index, right, type, ascending);\n\t\t}\n\t}\n\treturn items;\n}\n","import React, { useContext, useState, useEffect } from 'react';\n\nimport Store from '../context';\nimport { TodoHeader } from './TodoHeader';\n\nimport { MODE_EDIT } from '../services/mode';\nimport Queue from '../services/queue';\nimport { quickSort } from '../services/sort';\n\nexport default function TodoList() {\n\tconst { state, dispatch } = useContext(Store);\n\tconst [ flag, setFlag ] = useState(false);\n\tconst [ previousUniqueIds, setPreviousUniqueIds ] = useState([]);\n\tconst [ ascending, setAscending ] = useState(true);\n\n\tconst pluralize = count => (count > 1 ? `There are ${count} todos.` : `There is ${count} todo.`);\n\n\tconst isEditMode = () => state.mode === MODE_EDIT;\n\n\tuseEffect(\n\t\t() => {\n\t\t\tdispatch({ type: 'PROCESSING_FLAG', payload: flag });\n\t\t\tdispatch({ type: 'PREVIOUS_UNIQUE_ID', payload: previousUniqueIds });\n\t\t},\n\t\t[ flag, previousUniqueIds, dispatch ]\n\t);\n\n\tconst delay = async (action, ms) => {\n\t\tsetFlag(true);\n\t\tconst res = await new Promise(r =>\n\t\t\tsetTimeout(() => {\n\t\t\t\tr(action);\n\t\t\t}, ms)\n\t\t);\n\t\tsetFlag(false);\n\t\tres();\n\t};\n\n\t// on delete if index === -1 of previous added ids means\n\t// it has already been queued or previously deleted,\n\t// so only perform actions if not already queued in delete queue\n\tconst onDelete = uniqueId => {\n\t\tconst addDeletedToState = previousUniqueIds.concat(uniqueId);\n\t\tconst index = state.previousUniqueIds.findIndex(t => t === uniqueId);\n\t\tif (index === -1) {\n\t\t\tsetPreviousUniqueIds([ ...addDeletedToState ]);\n\t\t\tQueue.enqueue(() =>\n\t\t\t\tdelay(() => {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: 'COMPLETE',\n\t\t\t\t\t\tpayload: uniqueId\n\t\t\t\t\t});\n\t\t\t\t}, 3000)\n\t\t\t);\n\t\t}\n\t};\n\n\tconst onEdit = (todo, index) => {\n\t\tdispatch({\n\t\t\ttype: 'CHANGE_MODE',\n\t\t\tpayload: { mode: MODE_EDIT, currentTodo: todo, index }\n\t\t});\n\t};\n\n\t// when sorting, first check what type of sort, then reverse ascending or descending\n\tconst sortBy = column => {\n\t\tif (column === 'ID') {\n\t\t\tsetAscending(!ascending);\n\t\t\tconst num = state.filtered.map(e => ({\n\t\t\t\tuniqueId: parseFloat(e.uniqueId),\n\t\t\t\ttitle: e.title,\n\t\t\t\tcontent: e.content\n\t\t\t}));\n\t\t\t// custom sort (quickSort()) recursively sorts based on id or title and ascending or descending\n\t\t\tconst sorted = quickSort(num, 0, num.length - 1, 'uniqueId', ascending);\n\t\t\tdispatch({ type: 'SORT', payload: sorted });\n\t\t} else if (column === 'Title') {\n\t\t\tsetAscending(!ascending);\n\t\t\tconst filtered = [ ...state.filtered ];\n\t\t\tconst sorted = quickSort(filtered, 0, filtered.length - 1, 'title', ascending);\n\t\t\tdispatch({ type: 'SORT', payload: sorted });\n\t\t}\n\t};\n\n\tlet header = (\n\t\t<TodoHeader>\n\t\t\t{!state.processing && <span className=\"float-right\">{pluralize(state.filtered.length)}</span>}\n\t\t\t{state.processing && <span className=\"float-right\">Deleting...</span>}\n\t\t</TodoHeader>\n\t);\n\treturn (\n\t\t<div className=\"row\">\n\t\t\t<div className=\"col-md-12\">\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col-md-12\">\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{header}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{state.filtered.length > 0 && (\n\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t<div className=\"col-md-12\">\n\t\t\t\t\t\t\t<table className=\"table\">\n\t\t\t\t\t\t\t\t<thead className=\"thead-dark\">\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t{state.columns.map((col, index) => (\n\t\t\t\t\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t\t\t\t\t\tcol === 'Actions' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ textAlign: 'right' }\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : col !== 'Actions' && col !== 'Content' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ cursor: 'pointer' }\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\t\t\t\tcol === 'ID' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t() => sortBy(col)\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : col === 'Title' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t() => sortBy(col)\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{col}\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t{state.filtered.map((todo, index) => (\n\t\t\t\t\t\t\t\t\t\t<tr key={todo.uniqueId}>\n\t\t\t\t\t\t\t\t\t\t\t<th scope=\"row\">{todo.uniqueId}</th>\n\t\t\t\t\t\t\t\t\t\t\t<td>{todo.title}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{todo.content}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"float-right btn btn-danger btn-sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onDelete(todo.uniqueId)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isEditMode()}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ marginRight: '1rem' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"float-right btn btn-primary btn-sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={state.processing}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onEdit(todo, index)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useContext } from 'react';\nimport { MODE_NONE } from '../services/mode';\nimport Store from '../context';\n\nexport default function TodoFormInner(props) {\n\tconst { values, onKeyUp, onChange, btnText, processing, onSubmit } = props;\n\tconst { dispatch } = useContext(Store);\n\n\treturn (\n\t\t<div className=\"input-group\">\n\t\t\t<input\n\t\t\t\tclassName=\"form-control\"\n\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\tvalue={values.title}\n\t\t\t\tautoFocus={true}\n\t\t\t\tplaceholder=\"Enter todo title(required)\"\n\t\t\t\tonKeyUp={e => onKeyUp(e, 'add')}\n\t\t\t\tonChange={e => onChange(e, 'title')}\n\t\t\t/>\n\t\t\t<textarea\n\t\t\t\tclassName=\"form-control\"\n\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\tvalue={values.content}\n\t\t\t\tautoFocus={false}\n\t\t\t\tonKeyUp={e => onKeyUp(e, 'add')}\n\t\t\t\tplaceholder=\"Enter description\"\n\t\t\t\tonChange={e => onChange(e, 'content')}\n\t\t\t/>\n\t\t\t<div className=\"input-group-append\" style={{ width: '100%' }}>\n\t\t\t\t<button disabled={processing} className=\"btn btn-primary\" style={{ width: '100%' }} onClick={onSubmit}>\n\t\t\t\t\t{btnText}\n\t\t\t\t</button>\n\t\t\t\t{btnText === 'Edit' && (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn btn-danger\"\n\t\t\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\t\t\tonClick={() => dispatch({ type: 'CHANGE_MODE', payload: MODE_NONE })}\n\t\t\t\t\t>\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","function compareObjects(o1, o2) {\n\tlet k = '';\n\tfor (k in o1) if (o1[k] !== o2[k]) return false;\n\tfor (k in o2) if (o1[k] !== o2[k]) return false;\n\treturn true;\n}\n\nfunction itemExists(haystack, needle) {\n\tfor (let i = 0; i < haystack.length; i++) if (compareObjects(haystack[i], needle)) return true;\n\treturn false;\n}\n\nexport function search(todos, query) {\n\tlet q = query.trim().toLowerCase();\n\tconst newTodos = todos.map(e => {\n\t\treturn {\n\t\t\tuniqueId: e.uniqueId.toString(),\n\t\t\ttitle: e.title,\n\t\t\tcontent: e.content\n\t\t};\n\t});\n\tlet results = [];\n\tfor (let i = 0; i < newTodos.length; i++) {\n\t\tfor (let key in newTodos[i]) {\n\t\t\tif (newTodos[i][key].indexOf(q) !== -1) {\n\t\t\t\tif (!itemExists(results, newTodos[i])) results.push(newTodos[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn results;\n}\n","import React, { useContext, useState, useEffect } from 'react';\n\nimport Store from '../context';\n\nimport TodoFormInner from './TodoFormInner';\n\nimport { search } from '../services/query';\nimport { MODE_CREATE, MODE_SEARCH, MODE_EDIT, MODE_NONE } from '../services/mode';\n\nexport default function TodoForm() {\n\tconst { state, dispatch } = useContext(Store);\n\tconst { mode, currentTodo, processing } = state;\n\tconst [ todo, setTodo ] = useState({ uniqueId: getUniqueId(), title: '', content: '' });\n\tconst [ query, setQuery ] = useState('');\n\tconst [ editTodo, setEditTodo ] = useState({ ...currentTodo });\n\n\tuseEffect(\n\t\t() => {\n\t\t\tdispatch({ type: 'SEARCH', payload: { filtered: search(state.todos, query) } });\n\n\t\t\tsetEditTodo({ ...currentTodo });\n\t\t},\n\t\t[ query, dispatch, currentTodo, state.todos ]\n\t);\n\n\tfunction getUniqueId() {\n\t\treturn parseFloat(Date.now().toString().slice(5));\n\t}\n\n\tfunction handleSearch(e) {\n\t\tsetQuery(e.target.value);\n\t}\n\n\tfunction handleEditTodoChange(e, type) {\n\t\tif (type === 'title') {\n\t\t\tsetEditTodo({ ...editTodo, title: e.target.value });\n\t\t} else if (type === 'content') {\n\t\t\tsetEditTodo({ ...editTodo, content: e.target.value });\n\t\t}\n\t}\n\n\tfunction handleTodoChange(e, type) {\n\t\tif (type === 'title') {\n\t\t\tsetTodo({ ...todo, title: e.target.value });\n\t\t} else if (type === 'content') {\n\t\t\tsetTodo({ ...todo, content: e.target.value });\n\t\t}\n\t}\n\tfunction handleTodoEdit() {\n\t\tdispatch({ type: 'UPDATE_TODO', payload: { editTodo, index: state.index } });\n\t\tdispatch({ type: 'CHANGE_MODE', payload: MODE_NONE });\n\t}\n\n\tfunction handleTodoAdd() {\n\t\t// Set timeout to ensure Date.now is a unique ID\n\t\tif (todo.title) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tdispatch({ type: 'ADD_TODO', payload: todo });\n\t\t\t\tdispatch({ type: 'PREVIOUS_UNIQUE_ID', payload: [] });\n\t\t\t\tsetTodo({ uniqueId: getUniqueId(), title: '', content: '' });\n\t\t\t}, 50);\n\t\t}\n\t}\n\n\tfunction handleSubmitForm(event, type) {\n\t\tif (type === 'add') {\n\t\t\tif (event.keyCode === 13) handleTodoAdd();\n\t\t} else if (type === 'edit') {\n\t\t\tif (event.keyCode === 13) handleTodoEdit();\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"row\">\n\t\t\t<div className=\"col-md-12\">\n\t\t\t\t<br />\n\t\t\t\t{mode === MODE_CREATE ? (\n\t\t\t\t\t<TodoFormInner\n\t\t\t\t\t\tprocessing={processing}\n\t\t\t\t\t\tbtnText={'Add'}\n\t\t\t\t\t\tvalues={todo}\n\t\t\t\t\t\tonKeyUp={handleSubmitForm}\n\t\t\t\t\t\tonChange={handleTodoChange}\n\t\t\t\t\t\tonSubmit={handleTodoAdd}\n\t\t\t\t\t/>\n\t\t\t\t) : mode === MODE_EDIT ? (\n\t\t\t\t\t<TodoFormInner\n\t\t\t\t\t\tprocessing={processing}\n\t\t\t\t\t\tbtnText={'Edit'}\n\t\t\t\t\t\tvalues={editTodo}\n\t\t\t\t\t\tonKeyUp={handleSubmitForm}\n\t\t\t\t\t\tonChange={handleEditTodoChange}\n\t\t\t\t\t\tonSubmit={handleTodoEdit}\n\t\t\t\t\t/>\n\t\t\t\t) : mode === MODE_SEARCH ? (\n\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\tvalue={query}\n\t\t\t\t\t\t\tautoFocus={true}\n\t\t\t\t\t\t\tplaceholder=\"Search...\"\n\t\t\t\t\t\t\tonChange={handleSearch}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useContext, useReducer } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport Store from './context';\nimport reducer from './reducer';\nimport './assets/style/index.css';\n\nimport { usePersistedContext, usePersistedReducer } from './usePersist';\n\nimport TodoList from './components/TodoList';\nimport TodoForm from './components/TodoForm';\n\nfunction App() {\n\t// create a global store to store the state\n\tconst globalStore = usePersistedContext(useContext(Store), 'state');\n\n\t// `todos` will be a state manager to manage state.\n\tconst [ state, dispatch ] = usePersistedReducer(\n\t\tuseReducer(reducer, globalStore),\n\t\t'state' // The localStorage key\n\t);\n\n\treturn (\n\t\t// State.Provider passes the state and dispatcher to the down\n\t\t<Store.Provider value={{ state, dispatch }}>\n\t\t\t<TodoForm />\n\t\t\t<TodoList />\n\t\t</Store.Provider>\n\t);\n}\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(<App />, rootElement);\n","import { useEffect } from 'react';\n\nexport function usePersistedContext(context, key = 'state') {\n\tconst persistedContext = localStorage.getItem(key);\n\treturn persistedContext ? JSON.parse(persistedContext) : context;\n}\n\nexport function usePersistedReducer([ state, dispatch ], key = 'state') {\n\tuseEffect(() => localStorage.setItem(key, JSON.stringify(state)), [ key, state ]);\n\treturn [ state, dispatch ];\n}\n"],"sourceRoot":""}